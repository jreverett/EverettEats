@page "/"
@rendermode RenderMode.InteractiveServer
@using EverettEats.Enums
@using EverettEats.Models
@using EverettEats.Services
@inject IRecipeService RecipeService
@inject NavigationManager Navigation

<PageTitle>Everett Eats - Delicious Homemade Recipes</PageTitle>

<div class="home-container">
    <div class="home-header">
        <h1 class="home-title">Welcome to the Kitchen</h1>
        <p class="home-subtitle">Simple, delicious recipes made with love</p>
    </div>

    <div class="recipes-section">
        @if (isLoading)
        {
            <LoadingSpinner Text="Loading delicious recipes..." />
        }
        else
        {
            <div class="recipes-list">
                @foreach (var recipe in recipes)
                {
                    <div class="recipe-item" @onclick="() => NavigateToRecipe(recipe)">
                        <div class="recipe-image">
                            <img src="@recipe.ImageUrl" alt="@recipe.Title" loading="lazy" />
                        </div>
                        <div class="recipe-info">
                            <h2 class="recipe-title">@recipe.Title</h2>
                            <p class="recipe-description">@recipe.Description</p>
                            <div class="recipe-details">
                                <span class="detail-item">
                                    <span class="detail-icon">🕒</span>
                                    @recipe.TotalTime
                                </span>
                                <span class="detail-item">
                                    <span class="detail-icon">@GetDifficultyEmoji(recipe.Difficulty)</span>
                                    @recipe.Difficulty
                                </span>
                                <span class="detail-item">
                                    <span class="detail-icon">🍽️</span>
                                    @recipe.Servings
                                </span>
                            </div>
                            <div class="recipe-tags">
                                @foreach (var tag in recipe.Tags.Take(3))
                                {
                                    <span class="recipe-tag">@tag</span>
                                }
                            </div>
                        </div>
                        <div class="recipe-arrow">
                            <span>→</span>
                        </div>
                    </div>
                }
            </div>
        }
    </div>
</div>

@code {
    private List<Recipe> recipes = [];
    private bool isLoading = true;

    protected override async Task OnInitializedAsync()
    {
        recipes = await RecipeService.GetAllRecipesAsync();
        isLoading = false;
    }

    private void NavigateToRecipe(Recipe recipe)
    {
        Navigation.NavigateTo($"/recipe/{recipe.Slug}");
    }    private static string GetDifficultyEmoji(DifficultyLevel difficulty)
    {
        return difficulty switch
        {
            DifficultyLevel.Easy => "⭐",
            DifficultyLevel.Medium => "⭐⭐",
            DifficultyLevel.Hard => "⭐⭐⭐",
            _ => "⭐"
        };
    }
}